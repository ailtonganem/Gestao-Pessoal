<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Finan√ßas</title>
    
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">

    <!-- Adiciona a biblioteca Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script type="module" src="js/app.js" defer></script>
</head>
<body>

    <!-- Indicador de Carregamento -->
    <div id="loading">
        <p>Carregando...</p>
    </div>

    <!-- Cont√™iner de Autentica√ß√£o -->
    <main id="auth-container" style="display: none;">
        <section id="login-form">
            <h1>Acesse sua conta</h1>
            <form>
                <div class="form-control">
                    <label for="login-email">E-mail</label>
                    <input type="email" id="login-email" placeholder="seu@email.com" required>
                </div>
                <div class="form-control">
                    <label for="login-password">Senha</label>
                    <input type="password" id="login-password" placeholder="Sua senha" required>
                </div>
                <button type="submit">Entrar</button>
            </form>
            <p style="text-align: right; margin-top: 0.5rem; font-size: 0.9rem;">
                <a href="#" id="forgot-password-link">Esqueci minha senha</a>
            </p>
            <p>N√£o tem uma conta? <a href="#" id="show-register-link">Cadastre-se</a></p>
        </section>

        <section id="register-form" style="display: none;">
            <h1>Crie sua conta</h1>
            <p class="subtitle" style="text-align: center;">Ap√≥s o cadastro, sua conta precisar√° ser aprovada por um administrador.</p>
            <form>
                <div class="form-control">
                    <label for="register-email">E-mail</label>
                    <input type="email" id="register-email" placeholder="seu@email.com" required>
                </div>
                <div class="form-control">
                    <label for="register-password">Senha</label>
                    <input type="password" id="register-password" placeholder="Crie uma senha forte" required>
                </div>
                <button type="submit">Cadastrar</button>
            </form>
            <p>J√° tem uma conta? <a href="#" id="show-login-link">Fa√ßa Login</a></p>
        </section>

        <section id="pending-approval" style="display: none;">
            <h1>Aguardando Aprova√ß√£o</h1>
            <p>Sua conta foi criada com sucesso e est√° aguardando a aprova√ß√£o de um administrador.</p>
            <p>Voc√™ ser√° notificado por e-mail quando sua conta for ativada. Se tiver alguma d√∫vida, entre em contato com o suporte.</p>
            <button id="logout-pending-button" style="margin-top: 1.5rem;">Sair</button>
        </section>
    </main>

    <div id="application-wrapper" style="display: none;">
        <header>
            <h1 id="main-header-title">Dashboard</h1>
            <nav class="header-buttons">
                <a href="#" id="nav-dashboard-button" class="header-icon-button" title="Dashboard">üìä</a>
                <a href="#" id="nav-investments-button" class="header-icon-button" title="Meus Investimentos">üìà</a>
                <a href="#" id="nav-cards-button" class="header-icon-button" title="Gerenciar Cart√µes">üí≥</a>
                <a href="#" id="nav-settings-button" class="header-icon-button" title="Configura√ß√µes">‚öôÔ∏è</a>
                <a href="#" id="nav-logout-button" class="header-icon-button" title="Sair">üö™</a>
            </nav>
        </header>

        <!-- Cont√™iner do Dashboard -->
        <div id="dashboard-container">
            <main id="app-content">
                <section id="summary-section">
                    <div class="summary-card balance">
                        <h3>Saldo Total em Contas</h3>
                        <p id="total-balance-accounts">R$ 0,00</p>
                    </div>
                    <div class="summary-card">
                        <h3>Patrim√¥nio em Investimentos</h3>
                        <p id="total-investments-balance">R$ 0,00</p>
                    </div>
                    <div class="summary-card">
                        <h3>Receitas (no per√≠odo)</h3>
                        <p id="total-revenue">R$ 0,00</p>
                    </div>
                    <div class="summary-card">
                        <h3>Despesas (no per√≠odo)</h3>
                        <p id="total-expenses">R$ 0,00</p>
                    </div>
                    <div class="summary-card">
                        <h3>Balan√ßo (no per√≠odo)</h3>
                        <p id="period-balance">R$ 0,00</p>
                    </div>
                </section>
                
                <section class="dashboard-section" data-section-id="accounts-summary" draggable="true">
                    <div class="section-header">
                        <h2>Minhas Contas</h2>
                        <span class="toggle-icon">&#9658;</span>
                    </div>
                    <div class="section-content">
                        <ul id="accounts-summary-list">
                            <li>Carregando contas...</li>
                        </ul>
                    </div>
                </section>
    
                <section class="dashboard-section" data-section-id="expenses-chart" draggable="true">
                    <div class="section-header">
                        <h2>An√°lise de Despesas por Categoria</h2>
                        <span class="toggle-icon">&#9658;</span>
                    </div>
                    <div class="section-content">
                        <div class="chart-container">
                            <canvas id="expenses-chart"></canvas>
                        </div>
                    </div>
                </section>
    
                <section class="dashboard-section" data-section-id="trends-chart" draggable="true">
                    <div class="section-header">
                        <h2>Evolu√ß√£o Mensal (√öltimos 6 Meses)</h2>
                        <span class="toggle-icon">&#9658;</span>
                    </div>
                    <div class="section-content">
                        <div class="chart-container">
                            <canvas id="trends-chart"></canvas>
                        </div>
                    </div>
                </section>
                
                <section class="dashboard-section" data-section-id="budget-progress" draggable="true">
                    <div class="section-header">
                        <h2>Acompanhamento de Or√ßamentos</h2>
                        <span class="toggle-icon">&#9658;</span>
                    </div>
                    <div class="section-content">
                        <p class="subtitle" style="text-align: left;">Progresso dos seus gastos em rela√ß√£o aos limites definidos para o m√™s atual.</p>
                        <ul id="budget-progress-list">
                            <li>Carregando or√ßamentos...</li>
                        </ul>
                    </div>
                </section>
    
                <section class="dashboard-section" data-section-id="forms" draggable="true">
                    <div class="section-header">
                        <h2>Lan√ßamentos</h2>
                        <span class="toggle-icon">&#9658;</span>
                    </div>
                    <div class="section-content">
                        <div class="form-tabs">
                            <button class="tab-link active" data-form="transaction-form-section">Transa√ß√£o</button>
                            <button class="tab-link" data-form="transfer-form-section">Transfer√™ncia</button>
                        </div>
    
                        <section id="transaction-form-section" class="form-section active">
                            <h3>Adicionar Transa√ß√£o</h3>
                            <form id="add-transaction-form">
                                <div class="form-control">
                                    <label for="transaction-description">Descri√ß√£o</label>
                                    <input type="text" id="transaction-description" list="description-suggestions" placeholder="Ex: Sal√°rio, Almo√ßo" required>
                                    <datalist id="description-suggestions"></datalist>
                                </div>
                                <div class="form-control">
                                    <label for="transaction-amount" id="transaction-amount-label">Valor (R$)</label>
                                    <input type="number" id="transaction-amount" placeholder="0.00" step="0.01" required>
                                </div>
                                <div class="form-control">
                                    <label for="transaction-date">Data</label>
                                    <input type="date" id="transaction-date" required>
                                </div>
                                <div class="form-control">
                                    <label>Tipo</label>
                                    <div class="radio-container">
                                        <input type="radio" id="type-revenue" name="transaction-type" value="revenue" required>
                                        <label for="type-revenue">Receita</label>
                                        <input type="radio" id="type-expense" name="transaction-type" value="expense" checked>
                                        <label for="type-expense">Despesa</label>
                                    </div>
                                </div>
                                <div class="form-control" id="category-control-wrapper">
                                    <div style="display: flex; justify-content: space-between; align-items: baseline;">
                                        <label for="transaction-category">Categoria</label>
                                        <button type="button" id="split-transaction-button" class="button-link" style="font-size: 0.8rem; display: none;">Dividir</button>
                                    </div>
                                    <select id="transaction-category" required></select>
                                </div>
                                <div id="transaction-subcategory-wrapper" class="form-control" style="display: none;">
                                    <label for="transaction-subcategory">Subcategoria (opcional)</label>
                                    <input type="text" id="transaction-subcategory" list="subcategory-suggestions" placeholder="Ex: Supermercado, Restaurante">
                                    <datalist id="subcategory-suggestions"></datalist>
                                </div>
                                <!-- IN√çCIO DA ALTERA√á√ÉO -->
                                <div class="form-control">
                                    <label for="transaction-tags">Tags (opcional)</label>
                                    <input type="text" id="transaction-tags" placeholder="Ex: viagem, reforma, projetoX">
                                    <p class="subtitle" style="text-align: left; font-size: 0.8rem; margin-top: 0.2rem;">Separe as tags por v√≠rgula (,)</p>
                                </div>
                                <!-- FIM DA ALTERA√á√ÉO -->
                                <div class="form-control">
                                    <label for="payment-method">M√©todo de Pagamento</label>
                                    <select id="payment-method" required>
                                        <option value="pix">PIX</option>
                                        <option value="debit">D√©bito</option>
                                        <option value="cash">Dinheiro</option>
                                        <option value="credit_card">Cart√£o de Cr√©dito</option>
                                    </select>
                                </div>
                                <div id="transaction-account-wrapper" class="form-control">
                                    <label for="transaction-account">Conta</label>
                                    <select id="transaction-account" required>
                                        <option>Nenhuma conta cadastrada</option>
                                    </select>
                                </div>
                                <div id="credit-card-wrapper" class="form-control" style="display: none;">
                                    <label for="credit-card-select">Cart√£o</label>
                                    <select id="credit-card-select">
                                        <option>Nenhum cart√£o cadastrado</option>
                                    </select>
                                </div>
                                <div id="installment-options-wrapper" class="form-control" style="display: none;">
                                    <div class="radio-container" style="margin-bottom: 1rem;">
                                        <input type="checkbox" id="is-installment-checkbox" style="width: auto;">
                                        <label for="is-installment-checkbox" style="font-weight: normal; margin-bottom: 0;">√â uma compra parcelada?</label>
                                    </div>
                                    <div id="installments-count-wrapper" style="display: none;">
                                        <label for="installments-count">N√∫mero de Parcelas</label>
                                        <input type="number" id="installments-count" min="2" max="48" value="2">
                                    </div>
                                </div>
                                <button type="submit">Adicionar</button>
                            </form>
                        </section>
                        <section id="transfer-form-section" class="form-section" style="display: none;">
                            <h3>Realizar Transfer√™ncia</h3>
                            <form id="add-transfer-form">
                                <div class="form-control">
                                    <label for="transfer-description">Descri√ß√£o (opcional)</label>
                                    <input type="text" id="transfer-description" placeholder="Ex: Dinheiro para a carteira">
                                </div>
                                <div class="form-control">
                                    <label for="transfer-amount">Valor (R$)</label>
                                    <input type="number" id="transfer-amount" placeholder="0.00" step="0.01" required>
                                </div>
                                <div class="form-control">
                                    <label for="transfer-date">Data</label>
                                    <input type="date" id="transfer-date" required>
                                </div>
                                <div class="form-control">
                                    <label for="transfer-from-account">Conta de Origem</label>
                                    <select id="transfer-from-account" required></select>
                                </div>
                                <div class="form-control">
                                    <label for="transfer-to-account">Conta de Destino</label>
                                    <select id="transfer-to-account" required></select>
                                </div>
                                <button type="submit">Transferir</button>
                            </form>
                        </section>
                    </div>
                </section>
    
                <section class="dashboard-section" data-section-id="history" draggable="true">
                    <div class="section-header">
                        <h2>Hist√≥rico</h2>
                        <span class="toggle-icon">&#9658;</span>
                    </div>
                    <div class="section-content">
                        <div class="filter-container">
                            <div class="filter-controls">
                                <div class="form-control">
                                    <label for="filter-month">M√™s</label>
                                    <select id="filter-month">
                                        <option value="all">Todos</option>
                                        <option value="1">Janeiro</option>
                                        <option value="2">Fevereiro</option>
                                        <option value="3">Mar√ßo</option>
                                        <option value="4">Abril</option>
                                        <option value="5">Maio</option>
                                        <option value="6">Junho</option>
                                        <option value="7">Julho</option>
                                        <option value="8">Agosto</option>
                                        <option value="9">Setembro</option>
                                        <option value="10">Outubro</option>
                                        <option value="11">Novembro</option>
                                        <option value="12">Dezembro</option>
                                    </select>
                                </div>
                                <div class="form-control">
                                    <label for="filter-year">Ano</label>
                                    <select id="filter-year"></select>
                                </div>
                                <div class="form-control">
                                    <label for="filter-start-date">De:</label>
                                    <input type="date" id="filter-start-date">
                                </div>
                                <div class="form-control">
                                    <label for="filter-end-date">At√©:</label>
                                    <input type="date" id="filter-end-date">
                                </div>
                            </div>
                            <div class="filter-controls">
                                <div class="form-control" style="flex-grow: 2;">
                                    <label for="filter-description">Buscar por Descri√ß√£o</label>
                                    <input type="text" id="filter-description" placeholder="Ex: Almo√ßo, mercado...">
                                </div>
                                <div class="form-control">
                                    <label for="filter-category">Categoria</label>
                                    <select id="filter-category">
                                        <option value="all">Todas</option>
                                    </select>
                                </div>
                                <!-- IN√çCIO DA ALTERA√á√ÉO -->
                                <div class="form-control">
                                    <label for="filter-tag">Filtrar por Tag</label>
                                    <input type="text" id="filter-tag" placeholder="Ex: viagem">
                                </div>
                                <!-- FIM DA ALTERA√á√ÉO -->
                                <div class="form-control">
                                    <label for="filter-payment-method">M√©todo de Pagamento</label>
                                    <select id="filter-payment-method">
                                        <option value="all">Todos</option>
                                        <option value="pix">PIX</option>
                                        <option value="debit">D√©bito</option>
                                        <option value="cash">Dinheiro</option>
                                    </select>
                                </div>
                                <div class="form-control">
                                    <label for="filter-type">Tipo</label>
                                    <select id="filter-type">
                                        <option value="all">Todos</option>
                                        <option value="expense">Despesas</option>
                                        <option value="revenue">Receitas</option>
                                    </select>
                                </div>
                                <div class="form-control">
                                    <label for="filter-sort">Ordenar por</label>
                                    <select id="filter-sort">
                                        <option value="date_desc">Data (Mais Recente)</option>
                                        <option value="date_asc">Data (Mais Antiga)</option>
                                        <option value="amount_desc">Valor (Maior)</option>
                                        <option value="amount_asc">Valor (Menor)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="export-container" style="text-align: right; margin-bottom: 1rem;">
                            <button id="export-csv-button" class="button-secondary">Exportar para CSV</button>
                        </div>
                        <ul id="transactions-list"></ul>
                        <div class="pagination-container" style="text-align: center; margin-top: 1.5rem;">
                            <button id="load-more-button" class="button-secondary" style="display: none;">Carregar Mais</button>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Cont√™iner de Investimentos -->
        <div id="investments-container" style="display: none;">
            <main>
                <!-- Visualiza√ß√£o das Carteiras (Padr√£o) -->
                <div id="portfolios-view">
                    <section id="portfolio-list-section">
                        <h2>Minhas Carteiras</h2>
                        <p class="subtitle">Selecione uma carteira para ver os ativos ou crie uma nova abaixo.</p>
                        <ul id="portfolios-list">
                            <!-- Lista de carteiras ser√° renderizada aqui via JS -->
                        </ul>
                    </section>
                    <section id="add-portfolio-form-section">
                        <h3>Criar Nova Carteira</h3>
                        <form id="add-portfolio-form">
                            <div class="form-control">
                                <label for="portfolio-name">Nome da Carteira</label>
                                <input type="text" id="portfolio-name" placeholder="Ex: Rumo √† Aposentadoria" required>
                            </div>
                            <div class="form-control">
                                <label for="portfolio-description">Descri√ß√£o (opcional)</label>
                                <input type="text" id="portfolio-description" placeholder="Ex: Foco em dividendos e longo prazo">
                            </div>
                            <button type="submit">Criar Carteira</button>
                        </form>
                    </section>
                </div>
    
                <!-- Visualiza√ß√£o dos Ativos (Oculta por padr√£o) -->
                <div id="assets-view" style="display: none;">
                    <button id="back-to-portfolios-button" class="button-secondary" style="margin-bottom: 1.5rem;">&larr; Voltar para Carteiras</button>
                    <h2 id="assets-portfolio-name">Ativos - [Nome da Carteira]</h2>
                    
                    <section id="asset-list-section">
                        <p class="subtitle">Ativos presentes nesta carteira.</p>
                        <ul id="asset-list">
                            <!-- Lista de ativos ser√° renderizada aqui via JS -->
                        </ul>
                    </section>

                    <section id="add-asset-form-section">
                        <h3>Adicionar Novo Ativo</h3>
                        <form id="add-asset-form">
                            <div class="form-control">
                                <label for="asset-name">Nome do Ativo</label>
                                <input type="text" id="asset-name" placeholder="Ex: Petrobras PN" required>
                            </div>
                            <div class="form-control">
                                <label for="asset-ticker">Ticker (C√≥digo)</label>
                                <input type="text" id="asset-ticker" placeholder="Ex: PETR4" required>
                            </div>
                            <div class="form-control">
                                <label for="asset-type">Tipo</label>
                                <select id="asset-type" required>
                                    <option value="A√ß√£o">A√ß√£o</option>
                                    <option value="FII">Fundo Imobili√°rio (FII)</option>
                                    <option value="Tesouro Direto">Tesouro Direto</option>
                                    <option value="Criptomoeda">Criptomoeda</option>
                                    <option value="Outro">Outro</option>
                                </select>
                            </div>
                            <div class="form-control">
                                <label for="asset-class">Classe</label>
                                <select id="asset-class" required>
                                    <option value="Renda Vari√°vel">Renda Vari√°vel</option>
                                    <option value="Renda Fixa">Renda Fixa</option>
                                </select>
                            </div>
                             <div class="form-control">
                                <label for="asset-broker">Corretora/Exchange</label>
                                <input type="text" id="asset-broker" placeholder="Ex: XP, Binance">
                            </div>
                            <button type="submit">Adicionar Ativo</button>
                        </form>
                    </section>
                </div>
            </main>
        </div>
    </div>


    <!-- Cont√™iner para notifica√ß√µes (toasts) -->
    <div id="notification-container"></div>

    <!-- Modais -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Editar Transa√ß√£o</h2>
            <form id="edit-transaction-form">
                <input type="hidden" id="edit-transaction-id">
                <div class="form-control">
                    <label for="edit-transaction-description">Descri√ß√£o</label>
                    <input type="text" id="edit-transaction-description" required>
                </div>
                <div class="form-control">
                    <label for="edit-transaction-amount">Valor (R$)</label>
                    <input type="number" id="edit-transaction-amount" step="0.01" required>
                </div>
                <div class="form-control">
                    <label for="edit-transaction-date">Data</label>
                    <input type="date" id="edit-transaction-date" required>
                </div>
                <div class="form-control">
                    <label>Tipo</label>
                    <div class="radio-container">
                        <input type="radio" id="edit-type-revenue" name="edit-transaction-type" value="revenue" required>
                        <label for="edit-type-revenue">Receita</label>
                        <input type="radio" id="edit-type-expense" name="edit-transaction-type" value="expense">
                        <label for="edit-type-expense">Despesa</label>
                    </div>
                </div>
                <div class="form-control">
                    <label for="edit-transaction-category">Categoria</label>
                    <select id="edit-transaction-category" required></select>
                </div>
                <!-- IN√çCIO DA ALTERA√á√ÉO -->
                <div class="form-control">
                    <label for="edit-transaction-tags">Tags (opcional)</label>
                    <input type="text" id="edit-transaction-tags" placeholder="Separe as tags por v√≠rgula">
                </div>
                <!-- FIM DA ALTERA√á√ÉO -->
                <div class="form-control">
                    <label for="edit-payment-method">M√©todo de Pagamento</label>
                    <select id="edit-payment-method" required>
                        <option value="pix">PIX</option>
                        <option value="debit">D√©bito</option>
                        <option value="cash">Dinheiro</option>
                        <option value="credit_card">Cart√£o de Cr√©dito</option>
                    </select>
                </div>
                <div id="edit-account-wrapper" class="form-control">
                    <label for="edit-transaction-account">Conta</label>
                    <select id="edit-transaction-account" required></select>
                </div>
                <div id="edit-credit-card-wrapper" class="form-control" style="display: none;">
                    <label for="edit-credit-card-select">Cart√£o</label>
                    <select id="edit-credit-card-select"></select>
                </div>
                <button type="submit">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>
    <div id="credit-card-modal" class="modal">
        <div class="modal-content">
            <span class="close-card-modal-button">&times;</span>
            <h2>Meus Cart√µes</h2>
            <div id="card-management-view">
                <section id="card-list-section">
                    <h3>Cart√µes Cadastrados</h3>
                    <p class="subtitle">Clique em um cart√£o para ver as faturas.</p>
                    <ul id="credit-card-list"></ul>
                </section>
                <section id="add-card-form-section">
                    <h3>Adicionar Novo Cart√£o</h3>
                    <form id="add-credit-card-form">
                        <div class="form-control">
                            <label for="card-name">Nome do Cart√£o</label>
                            <input type="text" id="card-name" placeholder="Ex: NuBank Gold" required>
                        </div>
                        <div class="form-control">
                            <label for="card-closing-day">Dia do Fechamento (1-31)</label>
                            <input type="number" id="card-closing-day" min="1" max="31" required>
                        </div>
                        <div class="form-control">
                            <label for="card-due-day">Dia do Vencimento (1-31)</label>
                            <input type="number" id="card-due-day" min="1" max="31" required>
                        </div>
                        <div class="form-control">
                            <label for="card-limit">Limite de Cr√©dito (R$)</label>
                            <input type="number" id="card-limit" placeholder="5000.00" step="0.01" required>
                        </div>
                        <button type="submit">Adicionar Cart√£o</button>
                    </form>
                </section>
            </div>
            <div id="invoice-details-view" style="display: none;">
                <h3 id="invoice-card-name">Faturas - [Nome do Cart√£o]</h3>
                <button id="back-to-cards-button" class="button-secondary">&larr; Voltar</button>
                <div class="form-control">
                    <label for="invoice-period-select">Selecionar Fatura</label>
                    <select id="invoice-period-select"></select>
                </div>
                <div id="invoice-summary" class="summary-card">
                    <p>Total: <strong id="invoice-total-amount">R$ 0,00</strong></p>
                    <p>Vencimento: <span id="invoice-due-date">--/--/----</span></p>
                    <p>Status: <span id="invoice-status" class="status-badge">--</span></p>
                </div>
                <h4>Lan√ßamentos da Fatura</h4>
                <ul id="invoice-transactions-list"></ul>
                <div class="invoice-actions" style="display: flex; gap: 1rem; margin-top: 1rem;">
                    <button id="advance-payment-button" class="button-secondary" style="flex: 1;">Antecipar Pagamento</button>
                    <button id="pay-invoice-button" disabled style="flex: 1;">Pagar Fatura</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="edit-card-modal" class="modal">
        <div class="modal-content">
            <span class="close-edit-card-modal-button">&times;</span>
            <h2>Editar Cart√£o</h2>
            <form id="edit-credit-card-form">
                <input type="hidden" id="edit-card-id">
                <div class="form-control">
                    <label for="edit-card-name">Nome do Cart√£o</label>
                    <input type="text" id="edit-card-name" required>
                </div>
                <div class="form-control">
                    <label for="edit-card-closing-day">Dia do Fechamento (1-31)</label>
                    <input type="number" id="edit-card-closing-day" min="1" max="31" required>
                </div>
                <div class="form-control">
                    <label for="edit-card-due-day">Dia do Vencimento (1-31)</label>
                    <input type="number" id="edit-card-due-day" min="1" max="31" required>
                </div>
                <div class="form-control">
                    <label for="edit-card-limit">Limite de Cr√©dito (R$)</label>
                    <input type="number" id="edit-card-limit" step="0.01" required>
                </div>
                <button type="submit">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>

    <div id="split-transaction-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close-split-modal-button">&times;</span>
            <h2>Dividir Transa√ß√£o</h2>
            <div id="split-summary" class="summary-card" style="margin-bottom: 1rem; text-align: left;">
                <p>Valor Total: <strong id="split-total-amount">R$ 0,00</strong></p>
                <p>Valor Restante: <span id="split-remaining-amount">R$ 0,00</span></p>
            </div>

            <h4>Lan√ßamentos da Divis√£o</h4>
            <ul id="split-list" style="list-style: none; padding: 0; max-height: 150px; overflow-y: auto; margin-bottom: 1.5rem;">
                <!-- Itens da divis√£o ser√£o adicionados aqui -->
            </ul>

            <h4>Adicionar Divis√£o</h4>
            <form id="add-split-form">
                <div class="form-control">
                    <label for="split-category">Categoria</label>
                    <select id="split-category" required></select>
                </div>
                <div class="form-control">
                    <label for="split-amount">Valor (R$)</label>
                    <input type="number" id="split-amount" step="0.01" placeholder="0.00" required>
                </div>
                <button type="submit">Adicionar Divis√£o</button>
            </form>

            <div class="modal-actions" style="margin-top: 1.5rem; display: flex; gap: 1rem;">
                <button id="confirm-split-button" class="button-primary" style="flex: 1;" disabled>Confirmar Divis√£o</button>
                <button id="cancel-split-button" class="button-secondary" style="flex: 1;">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="close-settings-modal-button">&times;</span>
            <h2>Configura√ß√µes</h2>
            <section id="theme-settings-section">
                <h4>Apar√™ncia</h4>
                <div class="form-control theme-switcher">
                    <span>Modo Escuro</span>
                    <label class="switch">
                        <input type="checkbox" id="theme-toggle">
                        <span class="slider round"></span>
                    </label>
                </div>
            </section>
            <div class="modal-tabs">
                <button class="tab-link active" data-tab="account-management-tab">Minhas Contas</button>
                <button class="tab-link" data-tab="category-management-tab">Minhas Categorias</button>
                <button class="tab-link" data-tab="budget-management-tab">Or√ßamentos</button>
                <button class="tab-link" data-tab="recurring-management-tab">Recorr√™ncias</button>
                <button id="admin-tab-button" class="tab-link" data-tab="user-management-tab" style="display: none;">Gerenciar Usu√°rios</button>
            </div>
            <div id="settings-content">
                <div id="account-management-tab" class="tab-content active">
                    <section>
                        <h3>Gerenciar Contas</h3>
                        <p class="subtitle">Adicione as contas que voc√™ usa no dia a dia, como conta corrente, poupan√ßa ou carteira.</p>
                        <form id="add-account-form">
                            <h4>Adicionar Nova Conta</h4>
                            <div class="form-control">
                                <label for="account-name">Nome da Conta</label>
                                <input type="text" id="account-name" placeholder="Ex: Carteira, Bradesco" required>
                            </div>
                            <div class="form-control">
                                <label for="account-initial-balance">Saldo Inicial (R$)</label>
                                <input type="number" id="account-initial-balance" placeholder="0.00" step="0.01" value="0" required>
                            </div>
                            <button type="submit">Adicionar Conta</button>
                        </form>
                        <h4>Contas Cadastradas</h4>
                        <ul id="account-list"></ul>
                    </section>
                </div>
                <div id="category-management-tab" class="tab-content">
                    <section>
                        <h3>Gerenciar Categorias</h3>
                        <form id="add-category-form">
                            <h4>Adicionar Nova Categoria Principal</h4>
                            <div class="form-control">
                                <label for="new-category-name">Nome da Categoria</label>
                                <input type="text" id="new-category-name" placeholder="Ex: Investimentos" required>
                            </div>
                            <div class="form-control">
                                <label>Tipo</label>
                                <div class="radio-container">
                                    <input type="radio" id="new-category-type-revenue" name="new-category-type" value="revenue" required>
                                    <label for="new-category-type-revenue">Receita</label>
                                    <input type="radio" id="new-category-type-expense" name="new-category-type" value="expense" checked>
                                    <label for="new-category-type-expense">Despesa</label>
                                </div>
                            </div>
                            <button type="submit">Adicionar Categoria</button>
                        </form>
                        <div id="category-lists-container" class="category-management-container">
                            <div class="category-column">
                                <h4>Receitas</h4>
                                <ul id="revenue-categories-list" class="category-list"></ul>
                            </div>
                            <div class="category-column">
                                <h4>Despesas</h4>
                                <ul id="expense-categories-list" class="category-list"></ul>
                            </div>
                        </div>
                    </section>
                </div>
                <div id="budget-management-tab" class="tab-content">
                    <section>
                        <h3>Gerenciar Or√ßamentos Mensais</h3>
                        <p class="subtitle">Defina limites de gastos para suas categorias de despesa.</p>
                        <form id="set-budget-form">
                            <h4>Definir/Atualizar Or√ßamento</h4>
                            <div class="form-control">
                                <label for="budget-category">Categoria de Despesa</label>
                                <select id="budget-category" required></select>
                            </div>
                            <div class="form-control">
                                <label for="budget-amount">Valor do Or√ßamento (R$)</label>
                                <input type="number" id="budget-amount" placeholder="500.00" step="0.01" required>
                            </div>
                            <button type="submit">Salvar Or√ßamento</button>
                        </form>
                        <h4>Or√ßamentos Ativos</h4>
                        <ul id="budget-list"></ul>
                    </section>
                </div>
                <div id="recurring-management-tab" class="tab-content">
                    <section>
                        <h3>Gerenciar Transa√ß√µes Recorrentes</h3>
                        <p class="subtitle">Cadastre transa√ß√µes que se repetem todo m√™s, como sal√°rios ou assinaturas.</p>
                        <form id="add-recurring-form">
                            <h4>Adicionar Nova Recorr√™ncia</h4>
                            <div class="form-control">
                                <label for="recurring-description">Descri√ß√£o</label>
                                <input type="text" id="recurring-description" placeholder="Ex: Sal√°rio, Aluguel" required>
                            </div>
                            <div class="form-control">
                                <label for="recurring-amount">Valor (R$)</label>
                                <input type="number" id="recurring-amount" step="0.01" required>
                            </div>
                            <div class="form-control">
                                <label for="recurring-day">Dia do M√™s para Lan√ßamento (1-31)</label>
                                <input type="number" id="recurring-day" min="1" max="31" required>
                            </div>
                            <div class="form-control">
                                <label>Tipo</label>
                                <div class="radio-container">
                                    <input type="radio" id="recurring-type-revenue" name="recurring-type" value="revenue" required>
                                    <label for="recurring-type-revenue">Receita</label>
                                    <input type="radio" id="recurring-type-expense" name="recurring-type" value="expense" checked>
                                    <label for="recurring-type-expense">Despesa</label>
                                </div>
                            </div>
                            <div class="form-control">
                                <label for="recurring-payment-method">M√©todo de Lan√ßamento</label>
                                <select id="recurring-payment-method" required>
                                    <option value="account_debit">D√©bito em Conta</option>
                                    <option value="credit_card">Fatura do Cart√£o</option>
                                </select>
                            </div>
                            <div id="recurring-account-wrapper" class="form-control">
                                <label for="recurring-account">Conta</label>
                                <select id="recurring-account" required></select>
                            </div>
                            <div id="recurring-card-wrapper" class="form-control" style="display: none;">
                                <label for="recurring-card">Cart√£o de Cr√©dito</label>
                                <select id="recurring-card" required></select>
                            </div>
                            <div class="form-control">
                                <label for="recurring-category">Categoria</label>
                                <select id="recurring-category" required></select>
                            </div>
                            <button type="submit">Adicionar Recorr√™ncia</button>
                        </form>
                        <h4>Recorr√™ncias Cadastradas</h4>
                        <ul id="recurring-list"></ul>
                    </section>
                </div>
                <div id="user-management-tab" class="tab-content">
                    <section>
                        <h3>Gerenciar Usu√°rios</h3>
                        <p class="subtitle">Aprove ou gerencie o status dos usu√°rios do sistema.</p>
                        <ul id="user-list"></ul>
                    </section>
                </div>
            </div>
        </div>
    </div>
    <div id="edit-recurring-modal" class="modal">
        <div class="modal-content">
            <span class="close-edit-recurring-modal-button">&times;</span>
            <h2>Editar Recorr√™ncia</h2>
            <form id="edit-recurring-form">
                <input type="hidden" id="edit-recurring-id">
                <div class="form-control">
                    <label for="edit-recurring-description">Descri√ß√£o</label>
                    <input type="text" id="edit-recurring-description" required>
                </div>
                <div class="form-control">
                    <label for="edit-recurring-amount">Valor (R$)</label>
                    <input type="number" id="edit-recurring-amount" step="0.01" required>
                </div>
                <div class="form-control">
                    <label for="edit-recurring-day">Dia do M√™s para Lan√ßamento (1-31)</label>
                    <input type="number" id="edit-recurring-day" min="1" max="31" required>
                </div>
                <div class="form-control">
                    <label>Tipo</label>
                    <div class="radio-container">
                        <input type="radio" id="edit-recurring-type-revenue" name="edit-recurring-type" value="revenue" required>
                        <label for="edit-recurring-type-revenue">Receita</label>
                        <input type="radio" id="edit-recurring-type-expense" name="edit-recurring-type" value="expense">
                        <label for="edit-recurring-type-expense">Despesa</label>
                    </div>
                </div>
                 <div class="form-control">
                    <label for="edit-recurring-payment-method">M√©todo de Lan√ßamento</label>
                    <select id="edit-recurring-payment-method" required>
                        <option value="account_debit">D√©bito em Conta</option>
                        <option value="credit_card">Fatura do Cart√£o</option>
                    </select>
                </div>
                <div id="edit-recurring-account-wrapper" class="form-control">
                    <label for="edit-recurring-account">Conta</label>
                    <select id="edit-recurring-account" required></select>
                </div>
                <div id="edit-recurring-card-wrapper" class="form-control" style="display: none;">
                    <label for="edit-recurring-card">Cart√£o de Cr√©dito</label>
                    <select id="edit-recurring-card" required></select>
                </div>
                <div class="form-control">
                    <label for="edit-recurring-category">Categoria</label>
                    <select id="edit-recurring-category" required></select>
                </div>
                <button type="submit">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>
    <div id="edit-invoice-transaction-modal" class="modal">
        <div class="modal-content">
            <span class="close-edit-invoice-tx-modal-button">&times;</span>
            <h2>Editar Lan√ßamento do Cart√£o</h2>
            <form id="edit-invoice-transaction-form">
                <input type="hidden" id="edit-invoice-transaction-id">
                <input type="hidden" id="edit-invoice-id">
                <input type="hidden" id="edit-invoice-card-id">
                <div class="form-control">
                    <label for="edit-invoice-tx-description">Descri√ß√£o</label>
                    <input type="text" id="edit-invoice-tx-description" required>
                </div>
                <div class="form-control">
                    <label for="edit-invoice-tx-amount">Valor (R$)</label>
                    <input type="number" id="edit-invoice-tx-amount" step="0.01" required>
                </div>
                <div class="form-control">
                    <label for="edit-invoice-tx-date">Data da Compra</label>
                    <input type="date" id="edit-invoice-tx-date" required>
                </div>
                <div class="form-control">
                    <label for="edit-invoice-tx-category">Categoria</label>
                    <select id="edit-invoice-tx-category" required></select>
                </div>
                <button type="submit">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>

    <div id="pay-invoice-modal" class="modal">
        <div class="modal-content">
            <span class="close-pay-invoice-modal-button">&times;</span>
            <h2>Pagar Fatura</h2>
            <form id="pay-invoice-form">
                <input type="hidden" id="pay-invoice-id">
                <p class="subtitle">Selecione a conta que ser√° usada para pagar esta fatura.</p>
                <div class="form-control">
                    <label for="pay-invoice-account-select">Conta para Pagamento</label>
                    <select id="pay-invoice-account-select" required></select>
                </div>
                <div class="form-control">
                    <label for="pay-invoice-date">Data do Pagamento</label>
                    <input type="date" id="pay-invoice-date" required>
                </div>
                <button type="submit">Confirmar Pagamento</button>
            </form>
        </div>
    </div>

    <div id="advance-payment-modal" class="modal">
        <div class="modal-content">
            <span class="close-advance-payment-modal-button">&times;</span>
            <h2>Antecipar Pagamento de Fatura</h2>
            <form id="advance-payment-form">
                <input type="hidden" id="advance-payment-invoice-id">
                <p class="subtitle">Insira o valor que deseja antecipar e de qual conta o dinheiro sair√°.</p>
                 <div class="form-control">
                    <label for="advance-payment-amount">Valor a Antecipar (R$)</label>
                    <input type="number" id="advance-payment-amount" placeholder="0.00" step="0.01" min="0.01" required>
                </div>
                <div class="form-control">
                    <label for="advance-payment-account-select">Conta de Origem</label>
                    <select id="advance-payment-account-select" required></select>
                </div>
                <div class="form-control">
                    <label for="advance-payment-date">Data do Pagamento</label>
                    <input type="date" id="advance-payment-date" required>
                </div>
                <button type="submit">Confirmar Antecipa√ß√£o</button>
            </form>
        </div>
    </div>

    <div id="edit-transfer-modal" class="modal">
        <div class="modal-content">
            <span class="close-edit-transfer-modal-button">&times;</span>
            <h2>Editar Transfer√™ncia</h2>
            <form id="edit-transfer-form">
                <input type="hidden" id="edit-transfer-id">
                <div class="form-control">
                    <label for="edit-transfer-description">Descri√ß√£o (opcional)</label>
                    <input type="text" id="edit-transfer-description" placeholder="Ex: Dinheiro para a carteira">
                </div>
                <div class="form-control">
                    <label for="edit-transfer-amount">Valor (R$)</label>
                    <input type="number" id="edit-transfer-amount" placeholder="0.00" step="0.01" required>
                </div>
                <div class="form-control">
                    <label for="edit-transfer-date">Data</label>
                    <input type="date" id="edit-transfer-date" required>
                </div>
                <div class="form-control">
                    <label for="edit-transfer-from-account">Conta de Origem</label>
                    <select id="edit-transfer-from-account" required></select>
                </div>
                <div class="form-control">
                    <label for="edit-transfer-to-account">Conta de Destino</label>
                    <select id="edit-transfer-to-account" required></select>
                </div>
                <button type="submit">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>

    <div id="asset-movement-modal" class="modal">
        <div class="modal-content">
            <span class="close-asset-movement-modal-button">&times;</span>
            <h2 id="asset-movement-modal-title">Registrar Opera√ß√£o</h2>
            <form id="add-movement-form">
                <input type="hidden" id="movement-asset-id">
                <div class="form-control">
                    <label>Tipo de Opera√ß√£o</label>
                    <div class="radio-container">
                        <input type="radio" id="movement-type-buy" name="movement-type" value="buy" required checked>
                        <label for="movement-type-buy">Compra (Aporte)</label>
                        <input type="radio" id="movement-type-sell" name="movement-type" value="sell">
                        <label for="movement-type-sell">Venda (Resgate)</label>
                    </div>
                </div>
                <div class="form-control">
                    <label for="movement-date">Data da Opera√ß√£o</label>
                    <input type="date" id="movement-date" required>
                </div>
                <div class="form-control">
                    <label for="movement-quantity">Quantidade</label>
                    <input type="number" id="movement-quantity" placeholder="100" step="any" required>
                </div>
                <div class="form-control">
                    <label for="movement-price">Pre√ßo por Unidade (R$)</label>
                    <input type="number" id="movement-price" placeholder="25.50" step="any" required>
                </div>
                <div class="form-control">
                    <label for="movement-account">Conta para D√©bito/Cr√©dito</label>
                    <select id="movement-account" required></select>
                </div>
                <button type="submit">Registrar Opera√ß√£o</button>
            </form>
        </div>
    </div>

</body>
</html>
